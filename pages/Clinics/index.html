<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Clinics — Inservio</title>

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" />
<link rel="preload" href="/assets/img/global/clinicstop.svg" as="image" />
<link rel="preload" href="/assets/img/global/clinics-bottom.svg" as="image" />

  <style>
    :root{
      --bg: #f6f7fb;
      --card: #ffffff;
      --ink: #0f172a;
      --muted: #5b6472;

      /* Brand colours */
      --inv-teal: #098276;
      --inv-lime: #BEF21C;
      --text-grey: #a9aab0;

      /* Add these so button/phone styles work everywhere */
      --lime: #BEF21C;          /* used by pills/buttons */
      --neutral: #aaabb1;       /* used by headings/underlines */

      /* Existing aliases (kept for compatibility) */
      --primary: #0ea5a3;
      --primary-strong:#0a7f7d;
      --accent: #c6fb41;  /* lime accent (unused for buttons) */

      --radius: 22px;
      --maxw: 1040px;
      --ring: 0 22px 48px rgba(15,23,42,.10);
    }

    /* Ensure Poppins everywhere */
    body {
      font-family: 'Poppins', sans-serif;
    }

    a{ color:inherit; text-decoration:none; }

    /* NAVBAR */
    .navbar{ position:sticky; top:0; z-index:10; background:#fff; }
    .navbar .row{ display:flex; align-items:center; justify-content:space-between; padding:10px 30px; }
    .brand img{ height:34px; width:auto; display:block; }
    .nav-links{ display:flex; gap:22px; }
    .nav-links a{ font-weight:700; color:#000; text-decoration:none; }
    .navbar .lime-bar{ height:4px; background:var(--accent); }

    /* HERO */
    .hero{display:grid;grid-template-columns:1.1fr .9fr;align-items:center;gap:32px;padding:60px 40px;border-bottom:1px solid #eee}
    .hero h1{font-size:clamp(2rem,4.6vw,3rem);line-height:1.15;margin:0 0 12px;font-weight:700}
    .hero p{margin:0 0 20px;color:#6d6e75}
    .cta-row{display:flex;gap:14px;flex-wrap:wrap}
    .btn{display:inline-grid;place-items:center;padding:14px 18px;border-radius:14px;font-weight:700;border:1px solid transparent;box-shadow:0 6px 16px rgba(0,0,0,.06)}
    .btn.teal{background:var(--inv-teal);color:#fff}
    .btn.teal:hover{background:#06685e}
    .btn.lime{background:var(--lime);color:#000}
    .btn.ghost{background:#fff;border-color:#e6e7ea;color:#111}
    .hero-media video{width:100%;border-radius:16px;box-shadow:0 10px 24px rgba(0,0,0,.08)}

    /* No underlines on buttons/nav */
    .btn,
    .btn:visited,
    .btn:hover,
    .btn:focus,
    .nav-links a,
    .nav-links a:hover,
    .nav-links a:focus { text-decoration: none !important; }

    /* ICON STRIPS */
    .section{padding:40px 24px}
    .content--engaging{
      background:linear-gradient(180deg,#fff 0%,#fafafa 100%);
      border-radius:12px;padding:28px 24px;max-width:1100px;margin:0 auto;border:1px solid #eef0f2
    }
    .copy{max-width:900px;margin:0 auto 24px}
    .sub-heading{font-size:1.1rem;font-weight:600;color:var(--inv-teal);margin:0 0 10px}
    .content--engaging p{color:#6d6e75;margin:0}
    .icon-strip{
      position:relative;overflow:hidden;border-radius:16px;border:2px solid rgba(0,0,0,.04);
      background:#fff;box-shadow:0 8px 20px rgba(0,0,0,.04);padding:30px
    }
    .icon-strip .art{width:100%;transition:transform .3s ease,filter .3s ease}
    .icon-strip:hover .art{transform:scale(1.01);filter:drop-shadow(0 8px 22px rgba(0,0,0,.08))}
    .labels{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:20px}
    .label{display:grid;place-items:center;text-align:center;padding:12px;border-radius:12px;background:#fff;border:1px solid #e6e7ea;transition:transform .2s ease,box-shadow .2s ease}
    .label span{font-weight:700;color:var(--inv-teal)}
    .label:hover{transform:translateY(-3px);box-shadow:0 10px 18px rgba(0,0,0,.07)}

    /* CONTACT FORM */
    .contact{ padding:72px 20px; background:#f7f8f9; }
    .contact .container{
      max-width:980px; margin:0 auto; background:#fff; border-radius:16px;
      box-shadow:0 8px 26px rgba(0,0,0,.07); padding:32px;
    }
    .contact h2{ margin:0 0 16px; font-size:1.6rem; font-weight:700; color:#000; }
    form{ display:grid; grid-template-columns:1fr 1fr; gap:16px 20px; }
    .full{ grid-column:1/-1; }
    label{ display:block; font-size:.9rem; color:#444; margin-bottom:8px; }
    input, select, textarea{
      width:100%; padding:12px 14px; border:1px solid #e2e3e6; border-radius:10px;
      font-family:'Poppins',sans-serif; font-size:.95rem; color:#111; background:#fff;
      outline:none; transition:border .15s, box-shadow .15s;
    }
    input:focus, select:focus, textarea:focus{ border-color:var(--inv-teal); box-shadow:0 0 0 3px rgba(9,130,118,.12); }
    textarea{ min-height:150px; resize:vertical; }
    .submit-btn{
      background:var(--inv-teal); color:#fff; border:0; padding:14px 20px; border-radius:12px;
      font-weight:600; cursor:pointer; transition:transform .15s, background .15s, box-shadow .15s;
      box-shadow:0 6px 16px rgba(9,130,118,.25);
    }
    .submit-btn:hover{ background:#06685e; transform:translateY(-1px); }

    /* Phone error state */
    .error-text{ font-size:.85rem; color:crimson; margin-top:6px; display:none; }
    .invalid{ border-color:crimson !important; box-shadow:0 0 0 3px rgba(229,62,62,.15) !important; }

    /* Inline checkbox row */
    .checkbox-row{
      display:inline-flex; /* shrink to content, no full-width bar */
      align-items:center;
      gap:10px;
    }

    /* PHONE NUMBERS BY STATE */
    .phone {
      background:#fff; padding:32px 24px;
      border-top:6px solid var(--lime); border-bottom:4px solid var(--inv-teal);
      max-width:900px; margin:48px auto; border-radius:12px;
      box-shadow:0 8px 20px rgba(0,0,0,.05);
    }
    .phone h2{
      font-size:1.9rem; color:#4B4B4B; margin-bottom:22px;
      border-left:8px solid var(--neutral);
      padding-left:12px; letter-spacing:.5px; font-weight:700;
    }
    .dot-selectors{ display:flex; justify-content:space-between; gap:12px; margin-bottom:20px; flex-wrap:wrap; }
    .dot-option{
      flex:1; min-width:110px; text-align:center; background:#A9AAB0; color:#fff;
      padding:10px 16px; border-radius:50px; cursor:pointer; border:2px solid transparent;
      transition:all .25s; font-size:1rem; user-select:none; font-weight:600;
    }
    .dot-option:hover{ background:var(--lime); color:#000; }
    .dot-option.active{
      border-color:var(--inv-teal);
      background:var(--lime); color:#000;
      box-shadow:0 6px 16px rgba(9,130,118,.25);
      transform:translateY(-1px);
    }
    .phone-display{
      font-size:1.3rem; color:#333; text-align:center;
      opacity:0; transform:translateY(10px); transition:opacity .3s, transform .3s;
    }
    .phone-display.visible{ opacity:1; transform:translateY(0); }
    .phone-display a{
      color:#1c1c1c; text-decoration:none;
      border-bottom:2px dotted var(--neutral); padding-bottom:4px; transition:color .25s;
    }
    .phone-display a:hover{ color:var(--lime); }

    /* FOOTER */
    footer{padding:40px 24px;color:#6d6e75;border-top:3px solid var(--inv-teal)}

    /* Responsive */
    @media (max-width: 640px){
      form{ grid-template-columns:1fr; }
    }
  </style>
</head>
<body>
  
 <!-- NAVBAR -->
  <header class="navbar">
    <div class="row">
      <div class="brand">
<img src="/assets/img/global/Inservio-logo.svg" alt="Inservio logo">
      </div>
      <nav class="nav-links">
        <a href="/">Home</a>
        <a href="/pages/partners/">Partners</a>
        <a href="/pages/clinics/">Clinics</a>
        <a href="/pages/patients/">Patients</a>
        <a href="/pages/pay-invoice/">Pay Invoice</a>
        <a href="/pages/privacy-policy/">Privacy Policy</a>
        <a href="/pages/about-us/">About Us</a>
      </nav>

      <!-- ADDED: hamburger button -->
      <button class="nav-toggle" id="nav-toggle"
              aria-label="Open menu" aria-expanded="false" aria-controls="mobile-drawer">
        <span class="nav-toggle-box" aria-hidden="true">
          <span class="nav-toggle-inner"></span>
        </span>
      </button>
    </div>
    <div class="lime-bar" aria-hidden="true"></div>
  </header>

  <!-- ADDED: mobile drawer + overlay -->
  <nav class="mobile-drawer" id="mobile-drawer" hidden>
    <ul class="mobile-links">
      <li><a href="/">Home</a></li>
      <li><a href="/pages/partners/">Partners</a></li>
      <li><a href="/pages/clinics/">Clinics</a></li>
      <li><a href="/pages/patients/">Patients</a></li>
      <li><a href="/pages/pay-invoice/">Pay Invoice</a></li>
      <li><a href="/pages/privacy-policy/">Privacy Policy</a></li>
      <li><a href="/pages/about-us/">About Us</a></li>
    </ul>
  </nav>
  <div class="mobile-overlay" id="mobile-overlay" hidden></div>

  <main id="home">
    <!-- HERO -->
    <section class="hero">
      <div>
        <h1>Learn about how we assist clinics</h1>
        <p>We take care of the administrative workload, enabling you to dedicate your time and attention to patient care</p>
        <div class="cta-row">
        <a class="btn teal" href="#contact">Contact us</a>
          <a class="btn lime" href="/pages/about-us/">About us</a>
        </div>
      </div>
      <div class="hero-media">
        <video src="/assets/video/t1.mp4" autoplay muted loop playsinline aria-label="Clinic overview video"></video>
      </div>
    </section>

    <!-- TOP ICON STRIP -->
    <section class="section">
      <div class="content--engaging">
        <div class="copy">
          <h2 class="sub-heading">Cold-chain services</h2>
          <p>we ensure temperature controlled supply of stock without the headache</p>
        </div>
        <div class="icon-strip">
          <img class="art" src="/assets/img/global/clinicstop.svg" alt="Three operational icons"/>
          <div class="labels">
            <div class="label"><span>Cold-Chain delivery to clinic</span></div>
            <div class="label"><span>24 hour fridge monitoring and servicing</span></div>
            <div class="label"><span>Reduced administrative cost and burden</span></div>
          </div>
        </div>
      </div>
    </section>

    <!-- BELOW ICON STRIP -->
    <section class="section">
      <div class="content--engaging">
        <div class="copy">
          <h2 class="sub-heading">Operational advantages</h2>
          <p>We maintain safety and reduce admin overhead across the entire journey.</p>
        </div>
        <div class="icon-strip">
          <img class="art" src="/assets/img/global/clinicsbelow.svg" alt="Three operational icons"/>
          <div class="labels">
            <div class="label"><span>Operational efficiency refinement</span></div>
            <div class="label"><span>Instant script approvals</span></div>
            <div class="label"><span>VitKits® for intraviteral injection</span></div>
          </div>
        </div>
      </div>
    </section>

    <!-- CONTACT FORM -->
<section class="contact" id="contact">
  <style>
    /* keep honeypot accessible but hidden */
    .visually-hidden {
      position: absolute !important; width:1px; height:1px; padding:0; margin:-1px;
      overflow:hidden; clip:rect(0,0,1px,1px); white-space:nowrap; border:0;
    }

    /* card */
    .contact .container{
      max-width:1100px;
      margin:0 auto;
      background:#fff;
      border-radius:16px;
      box-shadow:0 8px 26px rgba(0,0,0,.07);
      padding:40px 32px;
    }
    .contact h2{
      text-align:left;      /* ← was center */
      margin:0 0 28px;
      font-weight:700;
    }

    /* grid */
    .contact form{
      display:grid;
      grid-template-columns:repeat(12, minmax(0,1fr));
      column-gap:24px;
      row-gap:20px;
    }
    .contact form > div:not(.full){ grid-column:span 6; }
    .contact form > .full{ grid-column:1 / -1; }

    /* fields */
    .contact label{ display:block; margin-bottom:8px; color:#444; font-size:.95rem; }
    .contact input,
    .contact select,
    .contact textarea{
      width:100%;
      padding:14px 16px;
      border:1px solid #e2e3e6;
      border-radius:12px;
      font: inherit;
      color:#111;
      background:#fff;
      outline:none;
      box-sizing:border-box;
      transition:border .15s, box-shadow .15s;
    }
    .contact input:focus,
    .contact select:focus,
    .contact textarea:focus{
      border-color:#098276;
      box-shadow:0 0 0 3px rgba(9,130,118,.12);
    }
    .contact textarea{ min-height:200px; resize:vertical; }

    /* checkbox + submit */
    .contact .checkbox{
      display:flex;
      align-items:center;
      gap:10px;
      justify-content:flex-start; /* left align */
    }
    .contact .checkbox input{ width:auto; }

    .contact .submit-wrap{ margin-top:6px; text-align:center; }
    .contact .submit-btn{
      background:#098276; color:#fff; border:0; padding:14px 20px; border-radius:12px;
      font-weight:600; cursor:pointer; box-shadow:0 6px 16px rgba(9,130,118,.25);
      transition:transform .15s, background .15s;
    }
    .contact .submit-btn:hover{ background:#06685e; transform:translateY(-1px); }

    /* mobile */
    @media (max-width:900px){
      .contact form{ grid-template-columns:1fr; }
      .contact form > div{ grid-column:1 / -1 !important; }
    }
  </style>

  <div class="container">
    <h2>Get in touch today</h2>

    <!-- Keep action if you have /thank-you page -->
    <form name="contact" method="POST" data-netlify="true" netlify-honeypot="bot-field" action="/thank-you">
      <input type="hidden" name="form-name" value="contact">
      <p class="visually-hidden"><label>Don’t fill this out: <input name="bot-field" /></label></p>

      <div>
        <label for="firstName">First name</label>
        <input type="text" id="firstName" name="firstName" placeholder="First name" required autocomplete="given-name">
      </div>

      <div>
        <label for="lastName">Last name</label>
        <input type="text" id="lastName" name="lastName" placeholder="Last name" autocomplete="family-name">
      </div>

      <div>
        <label for="email">Email</label>
        <input type="email" id="email" name="email" placeholder="you@example.com" required autocomplete="email">
      </div>

      <div>
        <label for="enquiry">Enquiry type</label>
        <select id="enquiry" name="enquiry" required>
          <option value="" selected disabled>Select an option</option>
          <option>Ophthalmology</option>
          <option>Invoice</option>
          <option>Clinic</option>
          <option>B2B/Partner</option>
          <option>Other</option>
        </select>
      </div>

      <div class="full">
        <label for="message">Your message</label>
        <textarea id="message" name="message" placeholder="How can we help?"></textarea>
      </div>

      <div class="full checkbox">
        <input type="checkbox" id="confirmEmail" name="confirmEmail">
        <label for="confirmEmail">Send me a confirmation email</label>
      </div>

      <!-- Netlify reCAPTCHA -->
      <div class="full recaptcha">
        <div data-netlify-recaptcha="true"></div>
      </div>

      <div class="full submit-wrap">
        <button type="submit" class="submit-btn">Submit enquiry</button>
      </div>
    </form>
  </div>
</section>

    <!-- PHONE NUMBERS BY STATE -->
    <section class="phone" aria-labelledby="call-us-heading">
      <h2 id="call-us-heading">Call Us</h2>
      <div class="dot-selectors">
        <button class="dot-option active" onclick="selectState('NSW', this)">NSW</button>
        <button class="dot-option" onclick="selectState('VIC', this)">VIC</button>
        <button class="dot-option" onclick="selectState('QLD', this)">QLD</button>
        <button class="dot-option" onclick="selectState('SA', this)">SA</button>
        <button class="dot-option" onclick="selectState('WA', this)">WA</button>
      </div>
      <div id="phoneDisplay" class="phone-display"></div>
    </section>
  </main>

  <footer>
    <div style="max-width:1100px;margin:0 auto">
      <small>© <span id="year"></span> Inservio. VitKits® is a registered mark. All rights reserved.</small>
    </div>
  </footer>

  <script>
    // Footer year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Phone state numbers
    const phoneMap = {
      'NSW': '(02)-9997-3941',
      'VIC': '(03)-8689-5530',
      'QLD': '(07)-3348-7640',
      'SA':  '(08)-6188-8330',
      'WA':  '(08)-6188-8340'
    };

    function selectState(stateCode, element) {
      document.querySelectorAll('.dot-option').forEach(dot => dot.classList.remove('active'));
      element.classList.add('active');

      const phoneDisplay = document.getElementById('phoneDisplay');
      const number = phoneMap[stateCode];
      if (number) {
        const tel = number.replace(/[^0-9]/g, '');
        phoneDisplay.innerHTML = `<a href="tel:${tel}">${number}</a>`;
        phoneDisplay.classList.add('visible');
      } else {
        phoneDisplay.innerHTML = '';
        phoneDisplay.classList.remove('visible');
      }
    }

    // AU phone auto-format & validation
    (function(){
      const phoneInput = document.getElementById('phone');
      const help = document.getElementById('phoneHelp');

      function digitsOnly(str){ return (str || '').replace(/[^\d+]/g,'').replace(/^\+61/, '61'); }
      function normalizeToLocal(d){
        if(d.startsWith('61')){
          const after = d.slice(2);
          if(after.startsWith('4')) return '0' + after;
          if(/^[2378]/.test(after)) return '0' + after;
          return after;
        }
        return d;
      }
      function formatAU(d){
        if(/^04\d{8}$/.test(d)){ return d.replace(/^(\d{4})(\d{3})(\d{3})$/, '$1 $2 $3'); }
        if(/^(02|03|07|08)\d{8}$/.test(d)){ return d.replace(/^(\d{2})(\d{4})(\d{4})$/, '$1 $2 $3'); }
        if(/^(1300|1800)\d{6}$/.test(d)){ return d.replace(/^(\d{4})(\d{3})(\d{3})$/, '$1 $2 $3'); }
        if(/^13\d{4}$/.test(d)){ return d.replace(/^(\d{2})(\d{2})(\d{2})$/, '$1 $2 $3'); }
        if(/^04\d{0,8}$/.test(d)){ return d.replace(/^(\d{0,4})(\d{0,3})(\d{0,3}).*$/, (_,a,b,c)=>[a,b,c].filter(Boolean).join(' ')); }
        if(/^(02|03|07|08)\d{0,8}$/.test(d)){ return d.replace(/^(\d{0,2})(\d{0,4})(\d{0,4}).*$/, (_,a,b,c)=>[a,b,c].filter(Boolean).join(' ')); }
        if(/^(1300|1800)\d{0,6}$/.test(d)){ return d.replace(/^(\d{0,4})(\d{0,3})(\d{0,3}).*$/, (_,a,b,c)=>[a,b,c].filter(Boolean).join(' ')); }
        if(/^13\d{0,4}$/.test(d)){ return d.replace(/^(\d{0,2})(\d{0,2})(\d{0,2}).*$/, (_,a,b,c)=>[a,b,c].filter(Boolean).join(' ')); }
        return d;
      }
      function isValidAU(d){
        return (
          /^04\d{8}$/.test(d) ||
          /^(02|03|07|08)\d{8}$/.test(d) ||
          /^(1300|1800)\d{6}$/.test(d) ||
          /^13\d{4}$/.test(d)
        );
      }
      function setError(state){
        if(state){
          phoneInput.classList.add('invalid');
          help.style.display = 'block';
          phoneInput.setAttribute('aria-invalid','true');
        }else{
          phoneInput.classList.remove('invalid');
          help.style.display = 'none';
          phoneInput.removeAttribute('aria-invalid');
        }
      }
      function handleFormat(){
        const raw = digitsOnly(phoneInput.value);
        const local = normalizeToLocal(raw);
        const formatted = formatAU(local);
        phoneInput.value = formatted;
        setError(local.length >= 6 && !isValidAU(local));
      }
      function handleSubmit(e){
        const raw = digitsOnly(phoneInput.value);
        const local = normalizeToLocal(raw);
        if(!isValidAU(local)){
          e.preventDefault();
          setError(true);
          phoneInput.focus();
        }else{
          setError(false);
        }
      }
      phoneInput.addEventListener('input', handleFormat);
      phoneInput.addEventListener('blur', handleFormat);
      document.getElementById('contact-form').addEventListener('submit', handleSubmit);
    })();

    // Default state select for phone section
    window.addEventListener('DOMContentLoaded', () => {
      const defaultBtn = document.querySelector('.dot-option.active');
      if (defaultBtn) selectState('NSW', defaultBtn);
    });

    // Demo prevent submit – remove for production
    document.getElementById('contact-form')?.addEventListener('submit', (e)=>{
      e.preventDefault();
      alert('Thanks! Your message has been recorded (demo).');
    });
  </script>

  <!-- ADDED: minimal inline CSS for hamburger/drawer -->
  <style>
    :root{ --hdr-h:64px; --shadow-lg:0 10px 28px rgba(0,0,0,.12); }
    /* show hamburger on mobile; keep desktop links hidden on mobile */
    .nav-toggle{ border:0; background:transparent; padding:10px; margin-left:auto; display:none; cursor:pointer; line-height:0; }
    @media (max-width:900px){
      .nav-links{ display:none; }
      .nav-toggle{ display:inline-flex; }
    }
    .nav-toggle-box{ width:28px; height:20px; position:relative; display:inline-block; }
    .nav-toggle-inner, .nav-toggle-inner::before, .nav-toggle-inner::after{
      position:absolute; left:0; width:28px; height:2px; background:#000;
      transition:transform .25s ease, opacity .2s ease;
    }
    .nav-toggle-inner{ top:9px; }
    .nav-toggle-inner::before{ content:""; top:-9px; }
    .nav-toggle-inner::after{ content:""; top:9px; }
    .nav-toggle.is-active .nav-toggle-inner{ transform:rotate(45deg); }
    .nav-toggle.is-active .nav-toggle-inner::before{ transform:translateY(9px) rotate(90deg); }
    .nav-toggle.is-active .nav-toggle-inner::after{ transform:translateY(-9px) rotate(90deg); opacity:0; }

    .mobile-drawer{
      position:fixed; top:var(--hdr-h); left:0; right:0;
      background:#fff; box-shadow:var(--shadow-lg);
      transform:translateY(-8px); opacity:0; pointer-events:none;
      transition:transform .2s ease, opacity .2s ease;
      border-top:3px solid #BEF21C; z-index:1100;
    }
    .mobile-drawer.open{ transform:translateY(0); opacity:1; pointer-events:auto; }

    .mobile-links{ list-style:none; margin:0; padding:10px 14px; }
    .mobile-links li{ border-bottom:1px solid #efefef; }
    .mobile-links li:last-child{ border-bottom:none; }
    .mobile-links a{ display:block; padding:14px 8px; text-decoration:none; font-weight:700; color:#000; transition:color .2s, background .2s; }
    .mobile-links a:hover{ color:#098276; background:rgba(9,130,118,.06); }

    .mobile-overlay{ position:fixed; inset:0; background:rgba(0,0,0,.28); opacity:0; pointer-events:none; transition:opacity .2s ease; z-index:1090; }
    .mobile-overlay.show{ opacity:1; pointer-events:auto; }

    .navbar{ min-height:var(--hdr-h); z-index:1000; }
    .navbar .row{ min-height:var(--hdr-h); }

    @media (prefers-reduced-motion:reduce){
      .nav-toggle-inner, .nav-toggle-inner::before, .nav-toggle-inner::after, .mobile-drawer, .mobile-overlay{ transition:none; }
    }
  </style>

  <!-- ADDED: inline hamburger JS -->
  <script>
  (function(){
    const btn = document.getElementById('nav-toggle');
    const drawer = document.getElementById('mobile-drawer');
    const overlay = document.getElementById('mobile-overlay');
    if (!btn || !drawer || !overlay) { console.warn('Hamburger: missing elements'); return; }

    function openMenu(){
      btn.classList.add('is-active');
      btn.setAttribute('aria-expanded','true');
      drawer.hidden = false; overlay.hidden = false;
      requestAnimationFrame(()=>{ drawer.classList.add('open'); overlay.classList.add('show'); });
      drawer.querySelector('a')?.focus();
      document.addEventListener('keydown', onKeydown);
    }
    function closeMenu(){
      btn.classList.remove('is-active');
      btn.setAttribute('aria-expanded','false');
      drawer.classList.remove('open'); overlay.classList.remove('show');
      setTimeout(()=>{ drawer.hidden = true; overlay.hidden = true; }, 180);
      document.removeEventListener('keydown', onKeydown);
      btn.focus();
    }
    function onKeydown(e){ if (e.key === 'Escape') closeMenu(); }

    btn.addEventListener('click', () =>
      (btn.getAttribute('aria-expanded') === 'true' ? closeMenu() : openMenu())
    );
    overlay.addEventListener('click', closeMenu);
    drawer.addEventListener('click', e => { if (e.target.closest('a')) closeMenu(); });

    // Close if resized to desktop (safe fallback)
    const mq = window.matchMedia('(min-width: 901px)');
    const onChange = e => { if (e.matches && btn.getAttribute('aria-expanded') === 'true') closeMenu(); };
    if (mq.addEventListener) mq.addEventListener('change', onChange);
    else if (mq.addListener) mq.addListener(onChange);
  })();
  </script>
</body>
</html>
